Nix - –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∏–∫
=================

> **–ê—Ö—Ç—É–Ω–≥**: —Ç—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω (–≤–æ–ª—å–Ω—ã–π) –ø–µ—Ä–µ–≤–æ–¥ [nix-1p](https://github.com/tazjin/nix-1p). –ï—Å–ª–∏ —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º –ø–æ—Ä—è–¥–æ–∫, –ø—Ä–µ–¥–ª–∞–≥–∞—é –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –∏ —Ç–æ–ø–∞—Ç—å —Ç—É–¥–∞.

–ü–∞–∫–µ—Ç–Ω–∏–∫ [Nix](https://nixos.org/nix/) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω–æ–∏–º–µ–Ω–Ω—ã–π —è–∑—ã–∫. –¢—É—Ç –º–æ–∂–Ω–æ –ø–æ-–±—ã—Å—Ç—Ä–æ–º—É —É–∑–Ω–∞—Ç—å –æ—Å–Ω–æ–≤—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.

–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–¥ —Å–ª–æ–≤–æ–º "Nix" –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ —è–∑—ã–∫, –∞ –Ω–µ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä.

<!--Please file an issue if something in here confuses you or you think something
important is missing.-->

If you have Nix installed, you can try the examples below by running `nix repl`
and entering code snippets there.

<!-- TODO: –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ statement –∏ expression -->

# –û–±–∑–æ—Ä–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è

–Ø–∑—ã–∫ Nix —è–≤–ª—è–µ—Ç—Å—è:

*   **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º**. –û–Ω –Ω–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º —à–∞–≥–æ–≤, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è *–¥–∞–Ω–Ω—ã–º–∏*, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ.


    –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Nix —è–≤–ª—è—é—Ç—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (expression), —Ç.–µ. –ª—é–±–∞—è –∏–∑ –Ω–∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ.

    –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç *–æ–¥–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö*, it does not
    execute a sequence of operations.

    Every Nix file evaluates to a *single expression*.
*   **–õ–µ–Ω–∏–≤—ã–º (lazy)**. Nix –ø–æ–π–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–¥–µ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

    –°–∫–∞–∂–µ–º, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `throw` –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –±—Ä–æ—Å–∞–µ—Ç –æ—à–∏–±–∫—É. –û–¥–Ω–∞–∫–æ –≤ —Å–ª–µ–¥—É—é—â–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º, –ø–æ—Å–∫–æ–ª—å–∫—É —á–∞—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `attrs`, –∫–æ—Ç–æ—Ä–∞—è –±—Ä–æ—Å–∞–µ—Ç –æ—à–∏–±–∫—É, –Ω–∏–∫–æ–º—É –≤ –æ–±—â–µ–º-—Ç–æ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞.

    ```nix
    let attrs = { a = 15; b = builtins.throw "–û–±—à–∏–±–∫–∞ —Ç—É—Ç."; };
    in "–í 'a' –ª–µ–∂–∏—Ç ${toString attrs.a}"
    ```
*   **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º**. Nix —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–Ω–∏–∫–∞. –ù–µ —Ç–æ —á—Ç–æ–±—ã –Ω–∞ –Ω–µ–º –≤–æ–æ–±—â–µ –Ω–µ–ª—å–∑—è –±—ã–ª–æ –∫–æ–¥–∏—Ç—å, –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ –Ω–µ –Ø–ü –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.

# –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —è–∑—ã–∫–∞

## Primitives / literals

–ü–æ–¥–æ–±–Ω–æ –¥—Ä—É–≥–∏–º —è–∑—ã–∫–∞–º, –≤ Nix –µ—Å—Ç—å —Ä—è–¥ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞–∫–∏–¥—ã–≤–∞—Ç—å –≤ –∫–æ–¥:

```nix
# –ß–∏—Å–ª–∞
42
1.72394

# –°—Ç—Ä–æ–∫–∏ –∏ –ø—É—Ç–∏
"hello"
./some-file.json

# –°—Ç—Ä–æ–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ç–µ—Ä–æ–ø–ª—è—Ü–∏–∏
"Hello ${name}"

# –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (multiline strings).
# –ï—Å–ª–∏ —É –≤—Å–µ—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –æ—Ç—Å—Ç—É–ø, –Ω–∞ –Ω–µ–≥–æ –∑–∞–±–∏–≤–∞—é—Ç, —Ç.–µ.
''
first line
second line
''
# —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ
  ''
    first line
    second line
  ''

# –°–ø–∏—Å–∫–∏ (list-—ã) (–ù–∏–∫–∞–∫–∏—Ö –∑–∞–ø—è—Ç—ã—Ö!).
[ 1 2 3 ]

# –ú–Ω–æ–∂–µ—Å—Ç–≤–∞ –∞—Ç—Ç—Ä–∏–±—É—Ç–æ–≤ (attribute sets, attrsets)
# –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ attrsetName.fieldName
{ a = 15; b = "something else"; }

# –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –∞—Ç—Ä—Å–µ—Ç—ã (–ø–æ–ª—è –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞)
rec { a = 15; b = a * 2; }
```

## –û–ø–µ—Ä–∞—Ç–æ—Ä—ã

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Ç–∞–∫–æ–≤—ã—Ö –≤ –¥—Ä—É–≥–∏—Ö –Ø–ü:

| –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------------|-----------------------------------------------------------------------------|
| `+`, `-`, `*`, `/`   | –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–∏—Å–ª–∞–º–∏ |
| `+`                  | –°–ª–æ–∂–µ–Ω–∏–µ (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è) —Å—Ç—Ä–æ–∫ |
| `++`                 | –°–ª–æ–∂–µ–Ω–∏–µ (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è) —Å–ø–∏—Å–∫–æ–≤ |
| `>`, `>=`, `<`, `<=`, `==` | –°—Ä–∞–≤–Ω–µ–Ω–∏—è |
| `&&`                 | –õ–æ–≥–∏—á–µ—Å–∫–æ–µ `–∏` |
| <code>&vert;&vert;</code> | –õ–æ–≥–∏—á–µ—Å–∫–æ–µ `–∏–ª–∏` |
| `e1 -> e2`           | –ò–º–ø–ª–∏–∫–∞—Ü–∏—è (<code>!e1 &vert;&vert; e2</code>)                 |
| `!`                  | –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ |
| `set.attr`           | –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ç—Ä–∏–±—É—Ç–∞ `attr` –≤ –∞—Ç—Ç—Ä—Å–µ—Ç–µ `set` |
| `set ? attr`         | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≥–æ –∂–µ –∞—Ç—Ç—Ä–∏–±—É—Ç–∞ –≤ –∞—Ç—Ç—Ä—Å–µ—Ç–µ |
| `left // right`      | –°–ª–æ–∂–∏—Ç—å –∞—Ç—Ç—Ä—Å–µ—Ç—ã `left` –∏ `right`, with the right set taking precedence |

Make sure to understand the `//`-operator, as it is used quite a lot and is
probably the least familiar one.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `let`-—ç–∫—Å–ø—Ä–µ—à–Ω—ã –∏ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä,

```nix
let
  a = 15;
  b = 2;
in a * b

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 30
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è–µ–º—ã, —Ç.–µ. –æ–¥–Ω–∞–∂–¥—ã –ø–æ–ª–æ–∂–∏–≤ —á—Ç–æ-–ª–∏–±–æ –≤ `a` –∏–ª–∏ `b`, –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ —á—Ç–æ-—Ç–æ —É–∂–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è. –ú–æ–∂–Ω–æ, –æ–¥–Ω–∞–∫–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ `let`-—ã, —Ç–æ–≥–¥–∞ –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º —Å–∫—Ä–æ—é—Ç —Å—Ç–∞—Ä—ã–µ –≤ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.

–í–Ω–µ —Å–≤–æ–∏—Ö `let`-–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ì–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–æ–∂–µ –Ω–µ—Ç.

## –§—É–Ω–∫—Ü–∏–∏

–§—É–Ω–∫—Ü–∏–∏ –≤ Nix - –ª—è–º–±–¥—ã –∏ –≤ –æ–±—â–µ–º-—Ç–æ —è–≤–ª—è—é—Ç—Å—è —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞–¥–æ –∫–∞–∫-—Ç–æ –Ω–∞–∑–≤–∞—Ç—å, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –º–µ—Å—Ç–µ, –µ–µ –∫–ª–∞–¥—É—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–ª–∏ attrset.

```
# –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ (name - –∞—Ä–≥—É–º–µ–Ω—Ç)
name: "–î–æ—Ä–æ—É, ${name}!"
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ([currying][])

–ß–∏—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –∫–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç**. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ª—è–º–±–¥—É, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª—è–º–±–¥—É, –∫–æ—Ç–æ—Ä–∞—è... –í—ã–≥–ª—è–¥–∏—Ç, –∫—Å—Ç–∞—Ç–∏, –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–∞—à–Ω–æ:

```nix
name: age: "${name}, ${toString age} –≥–æ–¥–∏–∫–æ–≤."
```

–û–¥–Ω–∞ –∏–∑ –ø–ª—é—à–µ–∫ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –æ–¥–∏–Ω –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç –Ω–∞ –±—É–¥—É—â–µ–µ:

```nix
let
  multiply = a: b: a * b;
  doubleIt = multiply 2; # –ø–µ—Ä–µ–¥–∞–ª–∏ a, –∂–¥–µ–º —Ç–æ–ª—å–∫–æ b
in
  doubleIt 15

# –ø–æ–ª—É—á–∞–µ–º 30
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (attrset)

–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—É—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É –∏ –ø–µ—Ä–µ–¥–∞—Ç—å attrset:

```nix
{ name, age }: "${name}, ${toString age} –≥–æ–¥–∏–∫–æ–≤"
```

–ü–ª—é—à–∫–∏ –ø—Ä–∏ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:

```nix
{ name, age ? 42 }: "${name} is ${toString age} years old"

```

–ù–∞ –¥–µ–ª–µ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫-—Ç–æ —Ç–∞–∫:

```nix
let greeter =  { name, age ? 42 }: "${name}, ${toString age} 42";
in greeter { name = "Slartibartfast"; }

# –ü–æ–ª—É—á–∞–µ–º "–°–ª–∞—Ä—Ç–∏–±–∞—Ä—Ç—Ñ–∞—Å—Ç, 42 –≥–æ–¥–∏–∫–∞"
# (–ù–∞ –¥–µ–ª–µ –æ–Ω, –∫–æ–Ω–µ—á–Ω–æ, —Å–∏–ª—å–Ω–æ —Å—Ç–∞—Ä—à–µ)
```

–ï—â–µ –º–æ–∂–Ω–æ –≤–æ—Ç–∫–Ω—É—Ç—å –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ (ellipsis), —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å attrset —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —á–µ–º –Ω—É–∂–Ω–æ —Ñ—É–Ω–∫—Ü–∏–∏:  

```nix
let greeter = { name, age, ... }: "${name}, ${toString age} –≥–æ–¥–∏–∫–∞";
    person = {
      name = "–°–ª–∞—Ä—Ç–∏–±–∞—Ä—Ç—Ñ–∞—Å—Ç";
      age = 42;
      email = "slartibartfast@magrath.ea";
    };
# 'email' –≤ —Ñ—É–Ω–∫—Ü–∏–∏ 'greeter' –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –¥–∞–∂–µ –Ω–µ —Å–≤–µ—Ç–∏—Ç—Å—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö, –æ–¥–Ω–∞–∫–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∞–¥–∞–µ—Ç
in greeter person 
```

–ù–∞–∫–æ–Ω–µ—Ü, `@` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–≤—è–∑–∞—Ç—å (bind) –ø—Ä–∏–ª–µ—Ç–µ–≤—à–∏–π –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã attrset –∫ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:

```nix
let func = { name, age, ... }@args: builtins.attrNames args;
in func {
    name = "–°–ª–∞—Ä—Ç–∏–±–∞—Ä—Ç—Ñ–∞—Å—Ç";
    age = 42;
    email = "slartibartfast@magrath.ea";
}

# –í—ã–¥–∞–µ—Ç: [ "age" "email" "name" ]
```

**–ê—Ö—Ç—É–Ω–≥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@` –≤–º–µ—Å—Ç–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç –∂–µ–ª–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º attrset –ø—Ä–∏–ª–µ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:

```nix
({ a ? 1, b }@args: args.a) { b = 1; }
# –≤—ã—Ö–ª–æg: error: attribute 'a' missing

({ a ? 1, b }@args: args.a) { b = 1; a = 2; }
# –ø–æ—Ä—è–¥–æ–∫: 2
```

## `if ... then ... else ...`

–í Nix –µ—Å—Ç—å –≤–µ—Ç–≤–ª–µ–Ω–∏–µ, –æ–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ–±–µ –≤–µ—Ç–∫–∏ (—Ç.–∫. –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –Ω–∞–¥–æ —á—Ç–æ-—Ç–æ –≤–µ—Ä–Ω—É—Ç—å, –≤—Å–µ –¥–µ–ª–∞).

```nix
if someCondition
then "–≤–µ—Ä–Ω–æ"
else "–Ω–µ–≤–µ—Ä–Ω–æ"
```

## `inherit`

`inherit` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞—Ç—Ç—Ä—Å–µ—Ç—É –∏–ª–∏ `let`-–±–∏–Ω–¥—É "–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å" –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –ö–æ—Ä–æ—á–µ –≥–æ–≤–æ—Ä—è, `inherit foo;` - —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –¥–ª—è `foo = foo;`.

–ü—Ä–∏–º–µ—Ä:

```nix
let
  name = "Slartibartfast";
  # ... —á–µ—Ç-–µ—â–µ
in {
  name = name; # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 'name' –∞—Ç—Ç—Ä—Å–µ—Ç—É –ø–æ –∫–ª—é—á—É 'name'
  # ... —á–µ—Ç-–µ—â–µ
}
```

`name = name;` –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `inherit name;`:

```nix
let
  name = "Slartibartfast";
  # ...
in {
  inherit name;
  # ...
}
```

–®—Ç—É–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–¥–æ–±–Ω–∞—è, –ø–æ—Å–∫–æ–ª—å–∫—É —Ç–∞–∫ –º–æ–∂–Ω–æ —Å—Ç–∞—â–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–∞–∑—É, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –¥—Ä—É–≥–∏—Ö –∞—Ç—Ç—Ä—Å–µ—Ç–æ–≤:

```nix
{
  inherit name age; # `name = name; age = age;`
  inherit (otherAttrs) email; # `email = otherAttrs.email`;
}
```

## `with`-—Å—Ç–µ–π—Ç–º–µ–Ω—Ç—ã

`with` –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –∞—Ç—Ç—Ä—Å–µ—Ç–∞:

```nix
let attrs = { a = 15; b = 2; };
in with attrs; a + b # 'a' –∏ 'b' —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ –∫–æ–Ω—Ü–∞ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ with-–∞
```

## `import` / `NIX_PATH` / `<entry>`

–§–∞–π–ª –Ω–∞ Nix –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –Ω–∏–∫—Å–æ—Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–Ω–æ–∏–º–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø—É—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ:

```nix
# –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤ —ç—Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–µ–∂–∏—Ç lib.nix —Å –¥–æ—Ñ–∏–≥–∞ –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
let myLib = import ./lib.nix;
in myLib.usefulFunction 42
```

`import` –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç —Ñ–∞–π–ª, –≤–µ—Ä–Ω—É–≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ.

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ –≤ —Ñ–∞–π–ª–∞—Ö –ª–µ–∂–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–æ–≥–¥–∞ –∏—Ö –∏–º–ø–æ—Ä—Ç –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: `import ./some-file { ... }`.

–ü–æ–¥–æ–±–Ω–æ `PATH` –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö Linux, –≤ Nix —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `NIX_PATH`, –≥–¥–µ –ø—É—Ç—è–º –¥–æ —Ñ–∞–π–ª–æ–≤ —Å nix-—ç–∫—Å–ø—Ä–µ—à–Ω–∞–º–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —á–∏—Ç–∞–µ–º—ã–µ –∏–º–µ–Ω–∞.

–í —Å–ª—É—á–∞–µ —Ç–∏–ø–∏—á–Ω–æ–≥–æ –∏–Ω—Å—Ç–æ–ª–ª–∞ —Ç–∞–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Å–∫–æ–ª—å–∫–æ [–∫–∞–Ω–∞–ª–æ–≤][] (—Å–∫–∞–∂–µ–º, `nixpkgs` –∏–ª–∏ `nixos-unstable`) –∏ –ø—É—Ç—å –¥–æ –∫–æ–Ω–≥–∏–≥–∞.

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ `NIX_PATH` –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```nix
<nixpkgs>
# —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `/home/tazjin/.nix-defexpr/channels/nixpkgs`
```

–≠—Ç–æ —á–∞—Å—Ç–µ–Ω—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –∫–∞–Ω–∞–ª–æ–≤:

```nix
let pkgs = import <nixpkgs> {};
in pkgs.something
```

## `or`

–ö–µ–π–≤–æ—Ä–¥ `or` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –≤—ã—Ç–∞—â–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∞—Ç—Ç—Ä—Å–µ—Ç–∞
–ø—Ä–∏ –µ–≥–æ –Ω–∞–ª–∏—á–∏–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ. –í—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫-—Ç–æ —Ç–∞–∫:

```nix
# 'a' –≤ –Ω–∞–ª–∏—á–∏–∏
let set = { a = 42; };
in set.a or 23
```

–õ–æ–≤–∏–º `42`.


```nix
# –ö–ª—é—á 'a' –Ω–∞–µ–ª—Å—è –∏ —Å–ø–∏—Ç
let set = { };
in set.a or 23
```

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ª–æ–≤–∏–º —Ñ–æ–ª–±—ç—á–Ω–æ–µ `23`.

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ù–µ —Å–æ–≤—Å–µ–º —è—Å–Ω–æ, –∫–æ–≥–æ –∏–∑ –Ω–∏—Ö —Å—á–∏—Ç–∞—Ç—å —Å—Ç–¥–ª–∏–±–æ–º, –Ω–æ –∑–Ω–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –∫–∞–∂–¥—É—é.

## `builtins`

–ß–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ —è–∑—ã–∫ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª—Å—è –ª–∏ –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –Ω–∏–∫—Å–æ–∫–æ–¥. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑ –Ω–∏—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –∏, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, —Ä–∞–±–æ—Ç–∞—é—Ç –∫—É–¥–∞ –±—ã—Å—Ç—Ä–µ–µ –∞–Ω–∞–ª–æ–≥–æ–≤, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö Nix.

–í—Å–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ [–æ–ø–∏—Å–∞–Ω—ã –≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏][builtins], —Ç–∞–º –∂–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ builtin-—ã:

* `derivation` (–°–º. [Derivations](#derivations))
* `toJSON` / `fromJSON`
* `toString`
* `toPath` / `fromPath`

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–æ–¥–∞ –Ω–∞ Nix, –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —à—Ç—É–∫—É, –Ω–∞–∑—ã–≤–∞–µ–º—É—é purity. –≠—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Å–≤–æ–π—Å—Ç–≤–∞, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–µ–≥–æ, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∂–µ derivation-–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. 

–ü—Ä–∏–º–µ—Ä—ã —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π:

* `fetchGit`, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞—â–∏—Ç —Ä–µ–ø—É —Å –≥–∏—Ç–∞ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä–µ–¥–µ–Ω—à–ª—ã git/ssh
* `fetchTarball`, —Å–ø–æ—Å–æ–±–Ω—ã–π –≤—ã–∫–∞—á–∏–≤–∞—Ç—å –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –∞—Ä—Ö–∏–≤—ã –±–µ–∑ –∑–Ω–∞–Ω–∏–π –æ –∏—Ö —Ö—ç—à–µ (–∫–æ—Ç –≤ –º–µ—à–∫–µ) 

## `pkgs.lib`

–ö–æ–ª–ª–µ–∫—Ü–∏—è –Ω–∏–∫—Å–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, —á–∞—â–µ –≤—Å–µ–≥–æ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è [nixpkgs][],
—Ç–∞–∫ –∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç attrset `lib`, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫—É—á—É –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–ò–∑–¥—Ä–µ–≤–ª–µ (üôÉ) –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π [–ª–µ–∂–∏—Ç –≤ —Å—ã—Ä—Ü–∞—Ö][lib-src]. –ê–≤—Ç–æ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∏–∫–∞, –æ–¥–Ω–∞–∫–æ, –≤ 2018 –Ω–∞–ø–∏—Å–∞–ª —Ç—É–ª–∑—É [nixdoc][], —á—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ –Ω–∏–º [—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –º–∞–Ω—É–∞–ª][lib-manual]. –ü–æ –∑–∞–≤–µ—Ä–µ–Ω–∏—è–º –∞–≤—Ç–æ—Ä–∞, –Ω–∞ –º–æ–º–µ–Ω—Ç 19–≥–æ –≥–æ–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∫–ª—é—á–∞–ª –Ω–µ –≤—Å—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —Ç–∞–∫ —á—Ç–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∑–∞–Ω—è—Ç—å—Å—è —á—Ç–µ–Ω–∏–µ–º –∫–æ–º–º–µ–Ω—Ç–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö.

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è `pkgs.lib`, —Ç–∞–º –ª–µ–∂–∞—Ç –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–∫—Å–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (list-—ã, –∞—Ç—Ç—Ä—Å–µ—Ç—ã, —Å—Ç—Ä–æ–∫–∏ –∏ —Ç.–¥.), —Ç–∞–∫ —á—Ç–æ –∑–Ω–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ª–∏–±—ã –∫—Ä–∞–π–Ω–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ.

```nix
{ pkgs ? import <nixpkgs> {} }:

with pkgs.lib; # –ø—Ä–∏—Ç–∞—â–∏—Ç—å pkgs.lib –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏

strings.toUpper "hello"

# –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "HELLO"
```

## `pkgs`. –ü—Ä–æ—Å—Ç–æ `pkgs`

–ü–æ–º–∏–º–æ —Å–∞–º–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ —Ç—É—Ç –ª–µ–∂–∞—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –¥–ª—è –ø–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ñ—Ç–∞ —É—Ç–∏–ª–∏—Ç—ã.

–ß–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö, –∫ –ø—Ä–∏–º–µ—Ä—É, –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [trivial builders][] –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤–æ–∑–º–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤/shell-—Å–∫—Ä–∏–ø—Ç–æ–≤, –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∫–æ–º–º–∞–Ω–¥ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∏—Ö –≤—ã–≤–æ–¥–∞ –∏ —Ç.–¥.

```nix
{ pkgs ? import <nixpkgs> {} }:

pkgs.writeText "hello.txt" "–ü—Ä–∏–≤–µ—Ç –ª—É–Ω–∞—Ç–∏–∫–∞–º!"

# –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç derivation, –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç hello.txt —Å (–Ω–∞—Ñ–∏–≥ –Ω–µ)–Ω—É–∂–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
```

# Derivations

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –Ω–∏–∫—Å–æ–≤–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –º–æ–∂–µ–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à—Ç—É–∫, –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö *derivation*. –≠—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∫–æ–π-—Ç–æ build action, –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤ `/nix/store/` –ª–æ–∂–∏—Ç—Å—è –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

–ù–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è builtin-–æ–º `derivation`, –æ–¥–Ω–∞–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ, –≤—Ä–æ–¥–µ [stdenv.mkDerivation][smkd]. –ê –µ—â–µ [—É –Ω–∏—Ö –µ—Å—Ç—å —Å–≤–æ–π –º–∞–Ω—É–∞–ª][drv-manual], –≥–¥–µ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ –æ–ø–∞–∫–µ—á–∏–≤–∞–Ω–∏–µ —Å–æ—Ñ—Ç–∞.

# –ò–¥–∏–æ–º—ã Nix

–¢—É—Ç –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–µ–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∏–∫—Å–æ–≤—ã—Ö –∏–¥–∏–æ–º. –•–æ—Ç—è —ç—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ —è–∑—ã–∫–∞, –æ–Ω–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ.

## –§–∞–π–ª—ã —Å –ª—è–º–±–¥–∞–º–∏

–ü—Ä–∞–≤–∏–ª–æ–º —Ö–æ—Ä–æ—à–µ–≥–æ —Ç–æ–Ω–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–ª–∞—Å—Ç—å –≤ —Ñ–∞–π–ª —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–∞–ø—Ä—è–º—É—é. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—å–∑–æ–≤–∞—Ç–µ–ª—é –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –ø–æ–º–µ–Ω—è—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –≤–µ—Ä—Å–∏—é `nixpkgs`.

–û–±—ã—á–Ω–æ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:


```nix
{ pkgs ? import <nixpkgs> {} }:

# ... —Ç–µ–ø–µ—Ä—å 'pkgs' –º–æ–∂–Ω–æ —é–∑–∞—Ç—å –≤ –∫–æ–¥–µ
```

## `callPackage`

Building on the previous pattern, there is a custom in nixpkgs of specifying the
dependencies of your file explicitly instead of accepting the entire package
set.

For example, a file containing build instructions for a tool that needs the
standard build environment and `libsvg` might start like this:

```nix
# my-funky-program.nix
{ stdenv, libsvg }:

stdenv.mkDerivation { ... }
```

Any time a file follows this header pattern it is probably meant to be imported
using a special function called `callPackage` which is part of the top-level
package set (as well as certain subsets, such as `haskellPackages`).

```nix
{ pkgs ? import <nixpkgs> {} }:

let my-funky-program = pkgs.callPackage ./my-funky-program.nix {};
in # ... something happens with my-funky-program
```

The `callPackage` function looks at the expected arguments (via
`builtins.functionArgs`) and passes the appropriate keys from the set in which
it is defined as the values for each corresponding argument.

## Overrides / Overlays

One of the most powerful features of Nix is that the representation of all build
instructions as data means that they can easily be *overridden* to get a
different result.

For example, assuming there is a package `someProgram` which is built without
our favourite configuration flag (`--mimic-threaten-tag`) we might override it
like this:

```nix
someProgram.overrideAttrs(old: {
    configureFlags = old.configureFlags or [] ++ ["--mimic-threaten-tag"];
})
```

This pattern has a variety of applications of varying complexity. The top-level
package set itself can have an `overlays` argument passed to it which may add
new packages to the imported set.

Note the use of the `or` operator to default to an empty list if the
original flags do not include `configureFlags`. This is required in
case a package does not set any flags by itself.

Since this can change in a package over time, it is useful to guard
against it using `or`.

For a slightly more advanced example, assume that we want to import `<nixpkgs>`
but have the modification above be reflected in the imported package set:

```nix
let
  overlay = (final: prev: {
    someProgram = prev.someProgram.overrideAttrs(old: {
      configureFlags = old.configureFlags or [] ++ ["--mimic-threaten-tag"];
    });
  });
in import <nixpkgs> { overlays = [ overlay ]; }
```

The overlay function receives two arguments, `final` and `prev`. `final` is
the [fixed point][fp] of the overlay's evaluation, i.e. the package set
*including* the new packages and `prev` is the "original" package set.

See the Nix manual sections [on overrides][] and [on overlays][] for more
details (note: the convention has moved away from using `self` in favor of
`final`, and `prev` instead of `super`, but the documentation has not been
updated to reflect this).

[currying]: https://en.wikipedia.org/wiki/Currying
[builtins]: https://nixos.org/nix/manual/#ssec-builtins
[nixpkgs]: https://github.com/NixOS/nixpkgs
[lib-src]: https://github.com/NixOS/nixpkgs/tree/master/lib
[nixdoc]: https://github.com/tazjin/nixdoc
[lib-manual]: https://nixos.org/nixpkgs/manual/#sec-functions-library
[channels]: https://nixos.org/nix/manual/#sec-channels
[trivial builders]: https://github.com/NixOS/nixpkgs/blob/master/pkgs/build-support/trivial-builders.nix
[smkd]: https://nixos.org/nixpkgs/manual/#chap-stdenv
[drv-manual]: https://nixos.org/nix/manual/#ssec-derivation
[fp]: https://github.com/NixOS/nixpkgs/blob/master/lib/fixed-points.nix
[on overrides]: https://nixos.org/nixpkgs/manual/#sec-overrides
[on overlays]: https://nixos.org/nixpkgs/manual/#chap-overlays
